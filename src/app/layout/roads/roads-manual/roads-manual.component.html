<div [@routerTransition]>
    <app-page-header [heading]="'Roads Manual'" [icon]="'fa-users'"></app-page-header>

    <div class="main-div">
        <div class="section edit">
            <div class="row my-2">
                <div class="col-sm-12 col-md-6">
                    <label>{{'Code' | translate}}</label>
                    <input type="text" class="form-control" [(ngModel)]="code" disabled>
                </div>
                <div class="col-sm-12 col-md-6">
                    <label>{{'Date de d√©part' | translate}}</label>
                    <div style="display: flex;flex-direction: row">
                        <input type="text" ngbDatepicker class="form-control" [(ngModel)]="startDate" #da="ngbDatepicker" />
                        <button class="btn btn-primary btn-sm" (click)="da.toggle()">
                            <i class="fa fa-calendar"></i>
                        </button>
                    </div>
                </div>
            </div>
            <div class="row my-2">
                <div class="col-sm-12 col-md-6">
                    <label>{{'Chauffeur' | translate}}</label>
                    <div style="display: inline-block;">
                        <select class="btn btn-outline-primary" [(ngModel)]="driver">
                            <option *ngFor="let _driver of drivers" [ngValue]="_driver">{{_driver.contact ? _driver.contact.name
                                : '(Sans nom)'}}</option>
                        </select>
                    </div>
                </div>
                <div class="col-sm-12 col-md-6">
                    <label>{{'Transport' | translate}}</label>
                    <div style="display: inline-block;">
                        <select class="btn btn-outline-primary" [(ngModel)]="vehicle">
                            <option *ngFor="let _vehicle of vehicles" [ngValue]="_vehicle">{{_vehicle.code}}</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <div class="section orders">
            <div class="table-wrapper-scroll-y">
                <table class="table table-bordered table-sm text-center">
                    <thead class="table-header">
                        <tr>
                            <th *ngFor="let header of headers">
                                <div class="th-item">
                                    <span class="th-item-text">{{header.text | translate}}</span>
                                    <i *ngIf="header.showSort" class="fa th-item-tool" [ngClass]="headerSortIcon(header.text)" (click)="changeSortState(header.text)"></i>
                                </div>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let order of orderList; let i = index">
                            <td>
                                <input type="checkbox" [(ngModel)]="selectedOrders[order.code]" (change)="updateProductList()">
                            </td>
                            <td>{{order.code}}</td>
                            <td>{{order.account ? order.account.code : '---'}}</td>
                            <td>{{getOrderTonnage(order)}}</td>
                            <td>{{getOrderDate(order)}}</td>
                        </tr>
                    </tbody>
                </table>
                <!-- 
                <div class="pagination-wrapper">
                    <ngb-pagination [(collectionSize)]="orderList.length" [(page)]="currentPage" [(maxSize)]="MAX_ITEM_PER_PAGE" [boundaryLinks]="true"></ngb-pagination>
                </div>
                -->
            </div>
        </div>
        <div class="section details">
            <div>
                <label>{{'Tonnage Total:' | translate}}</label>
                <input type="number" class="form-control" style="width: auto; display: inline;"
                [(ngModel)]="totalTonnage" disabled>
            </div>
            <label>{{'Products' | translate}}</label>
            <div class="products">
                <div class="table-wrapper-scroll-y">
                    <table class="table table-hover table-sm table-striped text-center">
                        <thead class="table-header">
                            <tr>
                                <th>{{'Product' | translate}}</th>
                                <th>{{'Tonnage' | translate}}</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let line of productList; let i = index">
                                <td>{{line.product.code}}</td>
                                <td>{{line.quantity}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<ngx-spinner bdColor="rgba(255,255,255,0)" size="large" color="#00d2ff" type="ball-spin-fade-rotating"></ngx-spinner>
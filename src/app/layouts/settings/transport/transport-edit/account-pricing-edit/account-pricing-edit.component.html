<p-dialog header="{{ title | translate }}"
[(visible)]="displayDialog"
 [focusOnShow]="false" [responsive]="true"
  showEffect="fade" [modal]="true" [style]="{ width: '800px' }"
  (onHide)="onShowDialog()">
  <div>
    <div class="modal-body">
      <div class="card-body">
        <form [formGroup]="accountPricingForm">

          <div class="row justify-content-around">
            <div class="form-group col-sm-3">
              <label class="font-weight-bold">{{ "Type " | translate }} *</label>
              <span *ngIf="
                  (accountPricingForm.get('fTurnType').touched &&
                    accountPricingForm.get('fTurnType').invalid) ||
                  (isFormSubmitted &&
                    accountPricingForm.get('fTurnType').invalid)
                " class="text-lighter" style="color: red; font-size: xx-small;">
                {{ 'Obligatoire' | translate}}

              </span>
              <p-dropdown [autoDisplayFirst]="false" appendTo="body"
              [disabled]="this.editMode"  [options]="turnTypeList" optionLabel="code" [filter]="true"
                [showClear]="true"  (onChange)="onSelectTurnType($event)"
                formControlName="fTurnType">
              </p-dropdown>
            </div>
            <div class="form-group col-sm-3">
              <label class="font-weight-bold">{{ "Categorie VÃ©hicule" | translate }} *</label>
              <span *ngIf="
                  (accountPricingForm.get('fVehicleCategory').touched &&
                    accountPricingForm.get('fVehicleCategory').invalid) ||
                  (isFormSubmitted &&
                    accountPricingForm.get('fVehicleCategory').invalid)
                " class="text-lighter" style="color: red; font-size: xx-small;">
                {{ 'Obligatoire' | translate}}

              </span>
              <p-dropdown [autoDisplayFirst]="false" appendTo="body" [options]="vehicleCategorieList" optionLabel="code" [filter]="true"
                [showClear]="true" [disabled]="this.editMode" (onChange)="onSelectVehicleCateory($event)"
                formControlName="fVehicleCategory">
              </p-dropdown>
            </div>



            <div class="form-group col-sm-3">
              <label class="font-weight-bold">{{ "Ville Source " | translate }} *</label>
              <span *ngIf="
                  (accountPricingForm.get('fVilleSource').touched &&
                    accountPricingForm.get('fVilleSource').invalid) ||
                  (isFormSubmitted &&
                    accountPricingForm.get('fVilleSource').invalid)
                " class="text-lighter" style="color: red; font-size: xx-small;">
                {{ 'Obligatoire' | translate}}

              </span>


              <p-autoComplete [disabled]="this.editMode" appendTo="body" formControlName="fVilleSource" [suggestions]="villeList"
                (onSelect)="onSelectVilleSource($event)" (completeMethod)="onVilleSourceSearch($event)" field="code">
              </p-autoComplete>

            </div>

            <div class="form-group col-sm-3">
              <label class="font-weight-bold">{{ "Ville Destination" | translate }} *</label>
              <span *ngIf="
                  (accountPricingForm.get('fVilleDestination').touched &&
                    accountPricingForm.get('fVilleDestination').invalid) ||
                  (isFormSubmitted &&
                    accountPricingForm.get('fVilleDestination').invalid)
                " class="text-lighter" style="color: red; font-size: xx-small;">
                {{ 'Obligatoire' | translate}}

              </span>
              <p-autoComplete [disabled]="this.editMode" appendTo="body" formControlName="fVilleDestination" [suggestions]="villeList"
                (onSelect)="onSelectVilleDestination($event)" (completeMethod)="onVilleSourceSearch($event)" field="code">
              </p-autoComplete>

            </div>

</div>

            <div class="row justify-content-around">

            <div class="form-group col-sm-3">
              <label class="font-weight-bold">{{ "Montant HT" | translate }} </label>

              <br />
              <input type="text" class="form-control" [attr.disabled]="true"  pInputText
                formControlName="fAmountHt" />

            </div>

            <div class="form-group col-sm-3">
              <label class="font-weight-bold">{{ "Client " | translate }} *</label>
              <span *ngIf="
                  (accountPricingForm.get('fAccount').touched &&
                    accountPricingForm.get('fAccount').invalid) ||
                  (isFormSubmitted &&
                    accountPricingForm.get('fAccount').invalid)
                " class="text-lighter" style="color: red; font-size: xx-small;">
                {{ 'Obligatoire' | translate}}

              </span>


              <p-autoComplete  appendTo="body" formControlName="fAccount" [suggestions]="accountList"
                (onSelect)="onSelectAccount($event)" (completeMethod)="onAccountSearch($event)" field="name">
              </p-autoComplete>

            </div>
            <div class="form-group col-sm-3">
              <label class="font-weight-bold">{{ "Prix" | translate }} </label>

              <br />
              <input type="text" class="form-control"
                pInputText
                formControlName="fPrice" />

            </div>

            <div class="form-group col-sm-3">
</div>
          </div>
        </form>
      </div>
    </div>

  </div>
  <p-footer>
    <div class="ui-dialog-buttonpane ui-helper-clearfix">
      <button type="button" pButton (click)="onShowDialog()" class="p-button-primary"
        label="{{'Annuler' |translate }}"></button>
      <button type="button" pButton (click)="onSubmit()" class="p-button-success"
        label="{{'Valider' |translate}}"></button>
    </div>
  </p-footer>
</p-dialog>

<p-toast position="top-right" [baseZIndex]="5000"></p-toast>
